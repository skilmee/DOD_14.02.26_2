{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center g-4">
  <div class="col-lg-9">
    <div class="card card-glass rounded-4 p-4 p-md-5">

      {% if not finished %}
        <div class="d-flex justify-content-between align-items-center mb-3 gap-3">
          <span class="badge badge-soft">
            –ò—Å–ø—ã—Ç–∞–Ω–∏–µ {{ task_num }} –∏–∑ {{ total_tasks }} üê±üîê
          </span>
          <span class="small">
            –ù–∞–±–µ—Ä–∏ <b>8+</b> –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî –∏ –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç –æ—Ç–∫—Ä–æ–µ—Ç –ø—É—Ç—å –∫ —Ñ–∏–Ω–∞–ª—É üíò
          </span>
        </div>

        <div class="progress mb-3" style="height: 8px;">
          <div class="progress-bar bg-info" style="width: {{ progress }}%;"></div>
        </div>

        <div class="row g-4 align-items-center">
          <div class="col-md-5">
            <div class="card card-glass rounded-4 p-3 h-100">
              <img src="{{ url_for('static', filename=image_empty) }}"
                   alt="–ò—Å–ø—ã—Ç–∞–Ω–∏—è –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç–∞"
                   class="w-100 rounded-4 mb-2"
                   style="display:block; max-height:420px; object-fit:cover; object-position:center;">
              <p class="small mb-0">
                –ö–∞–∂–¥—ã–π –≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî –µ—â—ë –æ–¥–∏–Ω —à–∞–≥ –¥–ª—è –ë—Ä–æ–¥—è–≥–∏ –∫ –≤—Å—Ç—Ä–µ—á–µ üíòüêæ
              </p>
            </div>
          </div>

          <div class="col-md-7">
            <h2 class="h5 mb-3">
              üê±üîê –ò—Å–ø—ã—Ç–∞–Ω–∏—è –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç–∞
            </h2>
            <p class="mb-3">
              {{ task.explain }}
            </p>
            <p class="mb-3">
              <strong>{{ task.vraag }}</strong>
            </p>

            <form method="post" action="{{ url_for('submit_quiz') }}">
              <div class="d-grid gap-2 mb-3">
                {% for option in task.options %}
                  <button
                    type="submit"
                    name="answer"
                    value="{{ option }}"
                    class="btn btn-outline-crypto text-start">
                    {{ option }}
                  </button>
                {% endfor %}
              </div>
            </form>

            <div class="d-flex justify-content-end align-items-center mt-2">
              <span class="small">
                –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç–∞ ‚ú®
              </span>
            </div>
          </div>
        </div>

      {% else %}
        <div class="row g-4 align-items-center">
          <div class="col-md-5">
            <div class="card card-glass rounded-4 p-3 h-100">
              {% if full_tree %}
                <img src="{{ url_for('static', filename=image_full) }}"
                     alt="–§–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç"
                     class="w-100 rounded-4 mb-2"
                     style="display:block; max-height:420px; object-fit:cover; object-position:center;">
              {% else %}
                <img src="{{ url_for('static', filename=image_empty) }}"
                     alt="–ü—É—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è"
                     class="w-100 rounded-4 mb-2"
                     style="display:block; max-height:420px; object-fit:cover; object-position:center;">
              {% endif %}
              <p class="small mb-0">
                {% if full_tree %}

                {% else %}
                  –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç –ø–æ–¥–º–∏–≥–Ω—É–ª: ¬´–ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë —Ä–∞–∑? –£ —Ç–µ–±—è –ø–æ–ª—É—á–∏—Ç—Å—è!¬ª ‚ú®
                {% endif %}
              </p>
            </div>
          </div>

          <div class="col-md-7">
            <h2 class="h4 fw-semibold mb-3">
              –ò—Ç–æ–≥–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π
            </h2>
            <p class="mb-3">
              –¢—ã –Ω–∞–±—Ä–∞–ª(–∞) <b>{{ score }}</b> –∏–∑ <b>{{ total }}</b> –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.
            </p>

            {% if full_tree %}
              <p class="mb-3">
                –£—Ä–∞! –¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è(–∞—Å—å) —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ –ö—Ä–∏–ø—Ç–æ-–∫–æ—Ç–∞ ‚Äî –∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ –ë—Ä–æ–¥—è–≥–∞ –∏ –õ–µ–¥–∏ –ø—Ä–æ–≤–æ–¥—è—Ç —ç—Ç–æ—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å –≤–º–µ—Å—Ç–µüíòüêæ
              </p>

            {% else %}
              <p class="mb-3">
                –ß—É—Ç—å-—á—É—Ç—å –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∏–Ω–∞–ª–∞. –ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ ‚Äî
                —Ç–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å –±–æ–ª—å—à–µ –ø—Ä–æ —à–∏—Ñ—Ä—ã, –∫–ª—é—á–∏ –∏ —Ö—ç—à–∏ üê±üîê
              </p>
            {% endif %}

            <a href="{{ url_for('reset') }}" class="btn btn-outline-crypto w-100">
              <i class="bi bi-arrow-repeat me-1"></i> –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
            </a>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
